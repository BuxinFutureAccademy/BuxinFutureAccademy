{% if id_card %}
<!-- ID Card Section (Admin View) -->
<div class="card mb-4 shadow-sm">
    <div class="card-header bg-primary text-white">
        <h5 class="mb-0"><i class="fas fa-id-card"></i> Generated ID Card</h5>
    </div>
    <div class="card-body">
        <div class="row">
            <!-- ID Card Preview -->
            <div class="col-md-4 text-center mb-3 mb-md-0">
                {% if id_card.photo_url %}
                    <img src="{{ id_card.photo_url }}" alt="ID Card Photo" class="img-fluid rounded" style="max-width: 200px; max-height: 200px; object-fit: cover; border: 3px solid #667eea;">
                {% else %}
                    <div class="rounded d-flex align-items-center justify-content-center mx-auto" style="width: 200px; height: 200px; background: #f0f0f0; border: 3px solid #667eea;">
                        <i class="fas fa-user fa-4x text-muted"></i>
                    </div>
                {% endif %}
            </div>
            
            <!-- ID Card Details -->
            <div class="col-md-8">
                <div class="mb-2">
                    <h5 class="mb-1">{{ id_card.name }}</h5>
                    <span class="badge bg-info">
                        {% if id_card.entity_type == 'individual' %}
                            Individual Student
                        {% elif id_card.entity_type == 'group' %}
                            Group Student
                        {% elif id_card.entity_type == 'family' %}
                            Family
                        {% elif id_card.entity_type == 'school' %}
                            School
                        {% elif id_card.entity_type == 'school_student' %}
                            School Student
                        {% endif %}
                    </span>
                </div>
                
                <div class="row mb-2">
                    <div class="col-4"><strong>System ID:</strong></div>
                    <div class="col-8"><span class="badge bg-primary">{{ id_card.system_id }}</span></div>
                </div>
                
                {% if id_card.class_name %}
                <div class="row mb-2">
                    <div class="col-4"><strong>Class:</strong></div>
                    <div class="col-8">{{ id_card.class_name }}</div>
                </div>
                {% endif %}
                
                {% if id_card.school_name %}
                <div class="row mb-2">
                    <div class="col-4"><strong>School:</strong></div>
                    <div class="col-8">{{ id_card.school_name }}</div>
                </div>
                {% endif %}
                
                {% if id_card.school_system_id %}
                <div class="row mb-2">
                    <div class="col-4"><strong>School ID:</strong></div>
                    <div class="col-8"><span class="badge bg-info">{{ id_card.school_system_id }}</span></div>
                </div>
                {% endif %}
                
                {% if id_card.group_system_id %}
                <div class="row mb-2">
                    <div class="col-4"><strong>Group ID:</strong></div>
                    <div class="col-8"><span class="badge bg-success">{{ id_card.group_system_id }}</span></div>
                </div>
                {% endif %}
                
                {% if id_card.family_system_id %}
                <div class="row mb-2">
                    <div class="col-4"><strong>Family ID:</strong></div>
                    <div class="col-8"><span class="badge bg-warning text-dark">{{ id_card.family_system_id }}</span></div>
                </div>
                {% endif %}
                
                <div class="row mb-2">
                    <div class="col-4"><strong>Approved:</strong></div>
                    <div class="col-8">{{ id_card.approved_at.strftime('%B %d, %Y') }}</div>
                </div>
                
                <div class="row mb-2">
                    <div class="col-4"><strong>Status:</strong></div>
                    <div class="col-8">
                        {% if id_card.is_active %}
                            <span class="badge bg-success">Active</span>
                        {% else %}
                            <span class="badge bg-secondary">Inactive</span>
                        {% endif %}
                    </div>
                </div>
                
                <!-- Action Buttons -->
                <div class="mt-3">
                    <a href="{{ url_for('admin.view_id_card', id_card_id=id_card.id) }}" class="btn btn-sm btn-primary me-2" target="_blank">
                        <i class="fas fa-eye"></i> View Full ID Card
                    </a>
                    <a href="{{ url_for('admin.download_id_card', id_card_id=id_card.id) }}" class="btn btn-sm btn-success">
                        <i class="fas fa-download"></i> Download ID Card
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>
{% else %}
<!-- No ID Card - Pending Approval -->
<div class="card mb-4 border-warning">
    <div class="card-header bg-warning text-dark">
        <h5 class="mb-0"><i class="fas fa-exclamation-triangle"></i> ID Card Status</h5>
    </div>
    <div class="card-body">
        <div class="alert alert-warning mb-0" role="alert">
            <i class="fas fa-info-circle"></i> <strong>ID Card not generated</strong> â€” Approval pending or entity not yet approved.
        </div>
    </div>
</div>
{% endif %}

