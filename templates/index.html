{% extends "base.html" %}

{% block content %}
<!-- Modern Hero Section -->
<div class="hero-section">
    <div class="hero-background"></div>
    <div class="container">
        <div class="row align-items-center min-vh-100">
            <div class="col-lg-6">
                <div class="hero-content">
                    {% if current_user.is_authenticated %}
                        <h1 class="hero-title">Welcome back, {{ current_user.first_name }}!</h1>
                        <p class="hero-subtitle">Continue your robotics journey</p>
                    {% else %}
                        <h1 class="hero-title">What will you design today?</h1>
                        <p class="hero-subtitle">Master robotics with hands-on learning and AI-powered tools</p>
                    {% endif %}
                    
                    <!-- Search Bar -->
                    <div class="search-container">
                        <div class="search-box">
                            <i class="fas fa-search search-icon"></i>
                            <input type="text" placeholder="Search live classes, projects, or kits..." class="search-input" id="globalSearch">
                            <button class="search-btn" onclick="performSearch()">
                                <i class="fas fa-arrow-right"></i>
                            </button>
                        </div>
                        
                        <!-- Search Results Dropdown -->
                        <div class="search-results" id="searchResults" style="display: none;">
                            <div class="search-loading" id="searchLoading" style="display: none;">
                                <i class="fas fa-spinner fa-spin"></i> Searching...
                            </div>
                            <div class="search-content" id="searchContent"></div>
                        </div>
                    </div>

                    {% if not current_user.is_authenticated %}
                    <div class="hero-actions">
                        <a href="{{ url_for('register') }}" class="btn btn-primary btn-hero">
                            <i class="fas fa-rocket me-2"></i>Start Learning
                        </a>
                        <a href="#live-classes" class="btn btn-outline-light btn-hero">
                            <i class="fas fa-video me-2"></i>Join Live Class
                        </a>
                    </div>
                    {% endif %}
                </div>
            </div>
            <div class="col-lg-6">
                <div class="hero-visual">
                    <div class="floating-card card-1">
                        <i class="fas fa-robot"></i>
                        <span>AI Assistant</span>
                    </div>
                    <div class="floating-card card-2">
                        <i class="fas fa-video"></i>
                        <span>Live Classes</span>
                    </div>
                    <div class="floating-card card-3">
                        <i class="fas fa-microchip"></i>
                        <span>Arduino Projects</span>
                    </div>
                    <div class="hero-device">
                        <div class="device-screen">
                            <div class="screen-content">
                                <div class="progress-ring">
                                    <div class="ring-fill"></div>
                                    <span class="progress-text">75%</span>
                                </div>
                                <p>Arduino Basics</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Stats Section -->
<div class="stats-section">
    <div class="container">
        <div class="row text-center">
            <div class="col-6 col-md-3">
                <div class="stat-item">
                    <div class="stat-number">10K+</div>
                    <div class="stat-label">Students</div>
                </div>
            </div>
            <div class="col-6 col-md-3">
                <div class="stat-item">
                    <div class="stat-number">500+</div>
                    <div class="stat-label">Projects Built</div>
                </div>
            </div>
            <div class="col-6 col-md-3">
                <div class="stat-item">
                    <div class="stat-number">24/7</div>
                    <div class="stat-label">AI Support</div>
                </div>
            </div>
            <div class="col-6 col-md-3">
                <div class="stat-item">
                    <div class="stat-number">98%</div>
                    <div class="stat-label">Success Rate</div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Main Features Grid -->
<div class="features-section" id="features">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="section-title">Everything you need to succeed</h2>
            <p class="section-subtitle">From live mentoring to hands-on kits, we've got you covered</p>
        </div>
        
        <div class="row g-4">
            <!-- Live Classes Card -->
            <div class="col-lg-4 col-md-6">
                <div class="feature-card live-classes-card" id="live-classes">
                    <div class="feature-header">
                        <div class="feature-icon">
                            <i class="fas fa-video"></i>
                        </div>
                        <div class="live-indicator">
                            <span class="live-dot"></span>
                            <span>LIVE</span>
                        </div>
                    </div>
                    <h3 class="feature-title">Live Classes</h3>
                    <p class="feature-description">Join interactive sessions with expert instructors</p>
                    <div class="feature-stats">
                        <div class="stat">
                            <span class="stat-value">12</span>
                            <span class="stat-label">Classes Today</span>
                        </div>
                        <div class="stat">
                            <span class="stat-value">150+</span>
                            <span class="stat-label">Students Online</span>
                        </div>
                    </div>
                    <a href="/classes" class="feature-link">
                        Join Now <i class="fas fa-arrow-right"></i>
                    </a>
                </div>
            </div>
            
            <!-- My Learning Card -->
            <div class="col-lg-4 col-md-6">
                <div class="feature-card learning-card">
                    <div class="feature-header">
                        <div class="feature-icon">
                            <i class="fas fa-graduation-cap"></i>
                        </div>
                        <div class="progress-indicator">75%</div>
                    </div>
                    <h3 class="feature-title">My Learning</h3>
                    <p class="feature-description">Self-paced learning with AI-powered guidance</p>
                    <div class="learning-progress">
                        <div class="current-lesson">
                            <div class="lesson-icon">
                                <i class="fas fa-play"></i>
                            </div>
                            <div class="lesson-info">
                                <h6>Arduino Basics</h6>
                                <p>Lesson 8 of 12</p>
                            </div>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 75%"></div>
                        </div>
                    </div>
                    <a href="{{ url_for('my_courses') }}" class="feature-link">
                        Continue Learning <i class="fas fa-arrow-right"></i>
                    </a>
                </div>
            </div>
            
            <!-- Shop Card -->
            <div class="col-lg-4 col-md-6">
                <div class="feature-card shop-card" id="shop">
                    <div class="feature-header">
                        <div class="feature-icon">
                            <i class="fas fa-shopping-cart"></i>
                        </div>
                        <div class="new-badge">NEW</div>
                    </div>
                    <h3 class="feature-title">Robotics Shop</h3>
                    <p class="feature-description">Premium kits and components for your projects</p>
                    <div class="featured-products">
                        <div class="product-item">
                            <span class="product-name">Arduino Starter Kit</span>
                            <span class="product-price">$89</span>
                        </div>
                        <div class="product-item">
                            <span class="product-name">Raspberry Pi Bundle</span>
                            <span class="product-price">$125</span>
                        </div>
                    </div>
                    <a href="{{ url_for('product_stats') }}" class="feature-link">
                        Browse Shop <i class="fas fa-arrow-right"></i>
                    </a>
                </div>
            </div>
            
            <!-- AI Assistant Card -->
            <div class="col-lg-4 col-md-6">
                <div class="feature-card ai-card">
                    <div class="feature-header">
                        <div class="feature-icon">
                            <i class="fas fa-robot"></i>
                        </div>
                        <div class="ai-status">
                            <span class="ai-dot"></span>
                            <span>Online</span>
                        </div>
                    </div>
                    <h3 class="feature-title">AI Assistant</h3>
                    <p class="feature-description">Get instant help with coding and debugging</p>
                    <div class="ai-preview">
                        <div class="ai-message">
                            <i class="fas fa-robot ai-avatar"></i>
                            <span>Ready to help with your Arduino project!</span>
                        </div>
                    </div>
                    <a href="/ai-tools" class="feature-link">
                        Ask AI <i class="fas fa-arrow-right"></i>
                    </a>
                </div>
            </div>
            
            <!-- Projects Card -->
            <div class="col-lg-4 col-md-6">
                <div class="feature-card projects-card">
                    <div class="feature-header">
                        <div class="feature-icon">
                            <i class="fas fa-lightbulb"></i>
                        </div>
                        <div class="project-count">127 Projects</div>
                    </div>
                    <h3 class="feature-title">Project Hub</h3>
                    <p class="feature-description">Share and discover amazing robotics projects</p>
                    <div class="trending-projects">
                        <div class="project-tag">#SmartHome</div>
                        <div class="project-tag">#Drones</div>
                        <div class="project-tag">#IoT</div>
                    </div>
                    <a href="{{ url_for('robotics_projects') }}" class="feature-link">
                        Explore Projects <i class="fas fa-arrow-right"></i>
                    </a>
                </div>
            </div>
            
            <!-- Community Card -->
            <div class="col-lg-4 col-md-6">
                <div class="feature-card community-card">
                    <div class="feature-header">
                        <div class="feature-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="online-count">248 Online</div>
                    </div>
                    <h3 class="feature-title">Community</h3>
                    <p class="feature-description">Connect with fellow makers and mentors</p>
                    <div class="community-activity">
                        <div class="activity-item">
                            <div class="activity-avatar">JD</div>
                            <span>Just completed Smart Lock project!</span>
                        </div>
                    </div>
                    <a href="/community" class="feature-link">
                        Join Community <i class="fas fa-arrow-right"></i>
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>

{% if current_user.is_authenticated %}
<!-- Recent Activity Section -->
<div class="activity-section">
    <div class="container">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h2 class="section-title">Continue where you left off</h2>
            <a href="#" class="see-all-link">See all</a>
        </div>
        
        <div class="row g-4">
            <div class="col-lg-4 col-md-6">
                <div class="activity-card">
                    <div class="activity-header">
                        <div class="activity-thumbnail">
                            <i class="fas fa-play"></i>
                        </div>
                        <div class="activity-menu">
                            <i class="fas fa-ellipsis-h"></i>
                        </div>
                    </div>
                    <div class="activity-content">
                        <h5 class="activity-title">Arduino Basics</h5>
                        <p class="activity-instructor">Dr. Sarah Johnson</p>
                        <div class="activity-meta">
                            <span><i class="fas fa-book"></i> 12 lessons</span>
                            <span><i class="fas fa-clock"></i> 4h 30m</span>
                        </div>
                        <div class="progress-container">
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 65%"></div>
                            </div>
                            <span class="progress-text">65% complete</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="col-lg-4 col-md-6">
                <div class="activity-card">
                    <div class="activity-header">
                        <div class="activity-thumbnail iot-bg">
                            <i class="fas fa-home"></i>
                        </div>
                        <div class="activity-menu">
                            <i class="fas fa-ellipsis-h"></i>
                        </div>
                    </div>
                    <div class="activity-content">
                        <h5 class="activity-title">Smart Home IoT</h5>
                        <p class="activity-instructor">Prof. Mike Chen</p>
                        <div class="activity-meta">
                            <span><i class="fas fa-book"></i> 18 lessons</span>
                            <span><i class="fas fa-clock"></i> 6h 15m</span>
                        </div>
                        <div class="progress-container">
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 20%"></div>
                            </div>
                            <span class="progress-text">20% complete</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="col-lg-4 col-md-6">
                <div class="activity-card">
                    <div class="activity-header">
                        <div class="activity-thumbnail project-bg">
                            <i class="fas fa-cog"></i>
                        </div>
                        <div class="activity-menu">
                            <i class="fas fa-ellipsis-h"></i>
                        </div>
                    </div>
                    <div class="activity-content">
                        <h5 class="activity-title">Smart Home Project</h5>
                        <p class="activity-instructor">Your Project</p>
                        <div class="activity-meta">
                            <span><i class="fas fa-save"></i> Draft saved</span>
                            <span><i class="fas fa-clock"></i> 2h ago</span>
                        </div>
                        <div class="project-status">
                            <span class="status-badge in-progress">In Progress</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Learning Streak Section -->
<div class="streak-section">
    <div class="container">
        <div class="streak-card">
            <div class="streak-content">
                <div class="streak-icon">
                    <i class="fas fa-fire"></i>
                </div>
                <div class="streak-info">
                    <h3>7 Day Streak</h3>
                    <p>Keep it up! You're on fire ðŸ”¥</p>
                </div>
            </div>
            <div class="streak-calendar">
                <div class="day completed">M</div>
                <div class="day completed">T</div>
                <div class="day completed">W</div>
                <div class="day completed">T</div>
                <div class="day completed">F</div>
                <div class="day completed">S</div>
                <div class="day today">S</div>
            </div>
        </div>
    </div>
</div>
{% endif %}

<!-- What's New Section -->
<div class="whats-new-section">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="section-title">What's new</h2>
            <p class="section-subtitle">Latest features and updates to enhance your learning</p>
        </div>
        
        <div class="row g-4">
            <div class="col-lg-4 col-md-6">
                <div class="news-card gradient-1">
                    <div class="news-content">
                        <div class="news-badge">NEW</div>
                        <h4 class="news-title">Advanced AI Code Assistant</h4>
                        <p class="news-description">Get smarter debugging help and code suggestions powered by the latest AI models</p>
                        <a href="#" class="news-link">Learn More <i class="fas fa-arrow-right"></i></a>
                    </div>
                    <div class="news-visual">
                        <i class="fas fa-robot"></i>
                    </div>
                </div>
            </div>
            
            <div class="col-lg-4 col-md-6">
                <div class="news-card gradient-2">
                    <div class="news-content">
                        <div class="news-badge">LIVE</div>
                        <h4 class="news-title">EV Workshop Series</h4>
                        <p class="news-description">Build your own electric vehicle from scratch in our new hands-on workshop</p>
                        <a href="#" class="news-link">Register Now <i class="fas fa-arrow-right"></i></a>
                    </div>
                    <div class="news-visual">
                        <i class="fas fa-car-battery"></i>
                    </div>
                </div>
            </div>
            
            <div class="col-lg-4 col-md-6">
                <div class="news-card gradient-3">
                    <div class="news-content">
                        <div class="news-badge">FEATURED</div>
                        <h4 class="news-title">Drone Programming Bootcamp</h4>
                        <p class="news-description">Master autonomous flight control and computer vision for drones</p>
                        <a href="#" class="news-link">Join Waitlist <i class="fas fa-arrow-right"></i></a>
                    </div>
                    <div class="news-visual">
                        <i class="fas fa-helicopter"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- CTA Section -->
{% if not current_user.is_authenticated %}
<div class="cta-section">
    <div class="container">
        <div class="cta-content">
            <div class="row align-items-center">
                <div class="col-lg-6">
                    <h2 class="cta-title">Ready to start building?</h2>
                    <p class="cta-subtitle">Join thousands of students mastering the future of technology with hands-on learning, expert mentorship, and AI-powered assistance.</p>
                    <div class="cta-features">
                        <div class="cta-feature">
                            <i class="fas fa-check"></i>
                            <span>Live expert mentorship</span>
                        </div>
                        <div class="cta-feature">
                            <i class="fas fa-check"></i>
                            <span>Hands-on robotics kits</span>
                        </div>
                        <div class="cta-feature">
                            <i class="fas fa-check"></i>
                            <span>24/7 AI assistant</span>
                        </div>
                    </div>
                    <div class="cta-buttons">
                        <a href="{{ url_for('register') }}" class="btn btn-primary btn-lg">
                            Start Free Trial <i class="fas fa-arrow-right ms-2"></i>
                        </a>
                        <a href="{{ url_for('login') }}" class="btn btn-outline-primary btn-lg">
                            Sign In
                        </a>
                    </div>
                </div>
                <div class="col-lg-6">
                    <div class="cta-visual">
                        <div class="testimonial-card">
                            <div class="testimonial-content">
                                <p>"This platform transformed how I learn robotics. The AI assistant is incredible!"</p>
                            </div>
                            <div class="testimonial-author">
                                <div class="author-avatar">JD</div>
                                <div class="author-info">
                                    <h6>John Doe</h6>
                                    <span>Robotics Engineer</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endif %}

<style>
:root {
    --primary-color: #6366f1;
    --primary-dark: #4f46e5;
    --secondary-color: #8b5cf6;
    --accent-color: #06b6d4;
    --success-color: #10b981;
    --warning-color: #f59e0b;
    --danger-color: #ef4444;
    --dark-color: #1f2937;
    --light-gray: #f8fafc;
    --medium-gray: #64748b;
    --border-color: #e2e8f0;
    --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
    --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1);
    --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1);
    --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1);
    --border-radius: 16px;
    --border-radius-lg: 24px;
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    line-height: 1.6;
    color: var(--dark-color);
    background-color: #ffffff;
}

/* Hero Section */
.hero-section {
    position: relative;
    background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
    overflow: hidden;
    padding: 0 0 50px;
}

.hero-background {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 600"><defs><linearGradient id="grad" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:rgba(255,255,255,0.1)"/><stop offset="100%" style="stop-color:rgba(255,255,255,0.05)"/></linearGradient></defs><circle cx="200" cy="100" r="50" fill="url(%23grad)"/><circle cx="800" cy="200" r="80" fill="url(%23grad)"/><circle cx="1000" cy="400" r="60" fill="url(%23grad)"/></svg>');
    animation: heroFloat 20s ease-in-out infinite;
}

.hero-content {
    position: relative;
    z-index: 2;
    padding: 50px 0;
}

.hero-title {
    font-size: 3.5rem;
    font-weight: 800;
    color: white;
    margin-bottom: 1rem;
    line-height: 1.2;
}

.hero-subtitle {
    font-size: 1.25rem;
    color: rgba(255, 255, 255, 0.9);
    margin-bottom: 2.5rem;
    font-weight: 400;
}

.search-container {
    max-width: 500px;
    margin: 0 0 2rem 0;
    position: relative;
}

.search-box {
    background: rgba(255, 255, 255, 0.95);
    border-radius: 60px;
    padding: 8px 8px 8px 24px;
    display: flex;
    align-items: center;
    backdrop-filter: blur(20px);
    box-shadow: var(--shadow-xl);
    transition: all 0.3s ease;
}

.search-box:focus-within {
    background: white;
    transform: translateY(-2px);
    box-shadow: 0 25px 50px -12px rgb(0 0 0 / 0.25);
}

.search-icon {
    color: var(--medium-gray);
    font-size: 1.1rem;
    margin-right: 16px;
}

.search-input {
    flex: 1;
    border: none;
    background: none;
    padding: 16px 0;
    font-size: 1rem;
    color: var(--dark-color);
    outline: none;
}

.search-input::placeholder {
    color: var(--medium-gray);
}

.search-btn {
    background: var(--primary-color);
    border: none;
    color: white;
    width: 48px;
    height: 48px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.3s ease;
}

.search-btn:hover {
    background: var(--primary-dark);
    transform: scale(1.05);
}

.hero-actions {
    display: flex;
    gap: 1rem;
    flex-wrap: wrap;
}

.btn-hero {
    padding: 16px 32px;
    border-radius: 50px;
    font-weight: 600;
    font-size: 1.1rem;
    transition: all 0.3s ease;
    border: 2px solid transparent;
}

.btn-primary.btn-hero {
    background: white;
    color: var(--primary-color);
    border-color: white;
}

.btn-primary.btn-hero:hover {
    background: transparent;
    color: white;
    border-color: white;
    transform: translateY(-2px);
}

.btn-outline-light.btn-hero {
    border-color: rgba(255, 255, 255, 0.5);
    color: white;
}

.btn-outline-light.btn-hero:hover {
    background: rgba(255, 255, 255, 0.1);
    border-color: white;
    transform: translateY(-2px);
}

/* Hero Visual */
.hero-visual {
    position: relative;
    height: 500px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.floating-card {
    position: absolute;
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(20px);
    border-radius: var(--border-radius);
    padding: 16px 20px;
    display: flex;
    align-items: center;
    gap: 12px;
    font-weight: 600;
    color: var(--dark-color);
    box-shadow: var(--shadow-lg);
    animation: cardFloat 6s ease-in-out infinite;
}

.card-1 {
    top: 20%;
    right: 10%;
    animation-delay: 0s;
}

.card-2 {
    top: 50%;
    left: 0;
    animation-delay: 2s;
}

.card-3 {
    bottom: 20%;
    right: 20%;
    animation-delay: 4s;
}

.floating-card i {
    font-size: 1.2rem;
    color: var(--primary-color);
}

.hero-device {
    width: 280px;
    height: 320px;
    background: var(--dark-color);
    border-radius: 32px;
    padding: 20px;
    box-shadow: var(--shadow-xl);
    position: relative;
    overflow: hidden;
}

.device-screen {
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    border-radius: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-direction: column;
    color: white;
}

.progress-ring {
    width: 120px;
    height: 120px;
    border-radius: 50%;
    background: conic-gradient(from 0deg, #ffffff 0deg, #ffffff 270deg, rgba(255,255,255,0.3) 270deg);
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 20px;
    position: relative;
}

.progress-ring::before {
    content: '';
    position: absolute;
    inset: 12px;
    background: inherit;
    border-radius: 50%;
}

.progress-text {
    position: relative;
    z-index: 2;
    font-size: 1.5rem;
    font-weight: 700;
}

/* Stats Section */
.stats-section {
    background: var(--light-gray);
    padding: 40px 0;
    border-bottom: 1px solid var(--border-color);
}

.stat-item {
    text-align: center;
}

.stat-number {
    font-size: 2.5rem;
    font-weight: 800;
    color: var(--primary-color);
    margin-bottom: 8px;
    display: block;
}

.stat-label {
    font-size: 0.9rem;
    color: var(--medium-gray);
    font-weight: 500;
}

/* Features Section */
.features-section {
    padding: 80px 0;
    background: white;
}

.section-title {
    font-size: 2.5rem;
    font-weight: 800;
    color: var(--dark-color);
    margin-bottom: 1rem;
}

.section-subtitle {
    font-size: 1.1rem;
    color: var(--medium-gray);
    font-weight: 400;
}

.feature-card {
    background: white;
    border-radius: var(--border-radius-lg);
    padding: 32px;
    height: 100%;
    border: 1px solid var(--border-color);
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
}

.feature-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: var(--primary-color);
    transform: scaleX(0);
    transition: transform 0.3s ease;
}

.feature-card:hover {
    transform: translateY(-8px);
    box-shadow: var(--shadow-xl);
    border-color: transparent;
}

.feature-card:hover::before {
    transform: scaleX(1);
}

.feature-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 24px;
}

.feature-icon {
    width: 64px;
    height: 64px;
    border-radius: var(--border-radius);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5rem;
    color: white;
    background: var(--primary-color);
}

.live-classes-card .feature-icon {
    background: linear-gradient(135deg, #ef4444, #dc2626);
}

.learning-card .feature-icon {
    background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
}

.shop-card .feature-icon {
    background: linear-gradient(135deg, var(--accent-color), #0891b2);
}

.ai-card .feature-icon {
    background: linear-gradient(135deg, var(--success-color), #059669);
}

.projects-card .feature-icon {
    background: linear-gradient(135deg, var(--warning-color), #d97706);
}

.community-card .feature-icon {
    background: linear-gradient(135deg, #ec4899, #db2777);
}

.live-indicator {
    background: rgba(239, 68, 68, 0.1);
    color: #dc2626;
    padding: 6px 12px;
    border-radius: 20px;
    font-size: 0.75rem;
    font-weight: 700;
    display: flex;
    align-items: center;
    gap: 6px;
}

.live-dot {
    width: 8px;
    height: 8px;
    background: #dc2626;
    border-radius: 50%;
    animation: pulse 2s infinite;
}

.progress-indicator {
    background: rgba(99, 102, 241, 0.1);
    color: var(--primary-color);
    padding: 6px 12px;
    border-radius: 20px;
    font-size: 0.75rem;
    font-weight: 700;
}

.new-badge {
    background: rgba(16, 185, 129, 0.1);
    color: var(--success-color);
    padding: 6px 12px;
    border-radius: 20px;
    font-size: 0.75rem;
    font-weight: 700;
}

.ai-status {
    background: rgba(16, 185, 129, 0.1);
    color: var(--success-color);
    padding: 6px 12px;
    border-radius: 20px;
    font-size: 0.75rem;
    font-weight: 700;
    display: flex;
    align-items: center;
    gap: 6px;
}

.ai-dot {
    width: 8px;
    height: 8px;
    background: var(--success-color);
    border-radius: 50%;
}

.project-count {
    background: rgba(245, 158, 11, 0.1);
    color: var(--warning-color);
    padding: 6px 12px;
    border-radius: 20px;
    font-size: 0.75rem;
    font-weight: 700;
}

.online-count {
    background: rgba(236, 72, 153, 0.1);
    color: #db2777;
    padding: 6px 12px;
    border-radius: 20px;
    font-size: 0.75rem;
    font-weight: 700;
}

.feature-title {
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--dark-color);
    margin-bottom: 12px;
}

.feature-description {
    color: var(--medium-gray);
    margin-bottom: 24px;
    line-height: 1.5;
}

.feature-stats {
    display: flex;
    gap: 24px;
    margin-bottom: 24px;
}

.stat {
    text-align: center;
}

.stat-value {
    display: block;
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--dark-color);
}

.stat-label {
    font-size: 0.8rem;
    color: var(--medium-gray);
}

.learning-progress {
    margin-bottom: 24px;
}

.current-lesson {
    display: flex;
    align-items: center;
    gap: 16px;
    background: var(--light-gray);
    padding: 16px;
    border-radius: var(--border-radius);
    margin-bottom: 16px;
}

.lesson-icon {
    width: 40px;
    height: 40px;
    background: var(--primary-color);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 0.9rem;
}

.lesson-info h6 {
    font-weight: 600;
    color: var(--dark-color);
    margin-bottom: 4px;
}

.lesson-info p {
    color: var(--medium-gray);
    font-size: 0.9rem;
    margin: 0;
}

.progress-bar {
    width: 100%;
    height: 8px;
    background: #e2e8f0;
    border-radius: 4px;
    overflow: hidden;
    margin-bottom: 8px;
}

.progress-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
    border-radius: 4px;
    transition: width 0.3s ease;
}

.progress-text {
    font-size: 0.8rem;
    color: var(--medium-gray);
}

.featured-products {
    margin-bottom: 24px;
}

.product-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 12px 0;
    border-bottom: 1px solid var(--border-color);
}

.product-item:last-child {
    border-bottom: none;
}

.product-name {
    font-weight: 500;
    color: var(--dark-color);
}

.product-price {
    font-weight: 700;
    color: var(--primary-color);
}

.ai-preview {
    background: var(--light-gray);
    border-radius: var(--border-radius);
    padding: 16px;
    margin-bottom: 24px;
}

.ai-message {
    display: flex;
    align-items: center;
    gap: 12px;
}

.ai-avatar {
    width: 32px;
    height: 32px;
    background: var(--success-color);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 0.9rem;
}

.ai-message span {
    color: var(--dark-color);
    font-size: 0.9rem;
}

.trending-projects {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
    margin-bottom: 24px;
}

.project-tag {
    background: rgba(245, 158, 11, 0.1);
    color: var(--warning-color);
    padding: 6px 12px;
    border-radius: 16px;
    font-size: 0.8rem;
    font-weight: 500;
}

.community-activity {
    background: var(--light-gray);
    border-radius: var(--border-radius);
    padding: 16px;
    margin-bottom: 24px;
}

.activity-item {
    display: flex;
    align-items: center;
    gap: 12px;
}

.activity-avatar {
    width: 32px;
    height: 32px;
    background: #ec4899;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 0.8rem;
    font-weight: 600;
}

.activity-item span {
    color: var(--dark-color);
    font-size: 0.9rem;
}

.feature-link {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    color: var(--primary-color);
    text-decoration: none;
    font-weight: 600;
    transition: all 0.3s ease;
}

.feature-link:hover {
    color: var(--primary-dark);
    gap: 12px;
}

/* Activity Section */
.activity-section {
    padding: 80px 0;
    background: var(--light-gray);
}

.see-all-link {
    color: var(--primary-color);
    text-decoration: none;
    font-weight: 600;
    transition: color 0.3s ease;
}

.see-all-link:hover {
    color: var(--primary-dark);
}

.activity-card {
    background: white;
    border-radius: var(--border-radius-lg);
    padding: 24px;
    transition: all 0.3s ease;
    border: 1px solid var(--border-color);
    height: 100%;
}

.activity-card:hover {
    transform: translateY(-4px);
    box-shadow: var(--shadow-lg);
    border-color: transparent;
}

.activity-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 20px;
}

.activity-thumbnail {
    width: 60px;
    height: 60px;
    background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
    border-radius: var(--border-radius);
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 1.3rem;
}

.iot-bg {
    background: linear-gradient(135deg, var(--accent-color), #0891b2);
}

.project-bg {
    background: linear-gradient(135deg, var(--warning-color), #d97706);
}

.activity-menu {
    background: none;
    border: none;
    color: var(--medium-gray);
    padding: 8px;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.3s ease;
}

.activity-menu:hover {
    background: var(--light-gray);
    color: var(--dark-color);
}

.activity-title {
    font-size: 1.2rem;
    font-weight: 700;
    color: var(--dark-color);
    margin-bottom: 8px;
}

.activity-instructor {
    color: var(--medium-gray);
    font-size: 0.9rem;
    margin-bottom: 16px;
}

.activity-meta {
    display: flex;
    gap: 16px;
    margin-bottom: 16px;
}

.activity-meta span {
    display: flex;
    align-items: center;
    gap: 6px;
    color: var(--medium-gray);
    font-size: 0.85rem;
}

.progress-container {
    margin-top: 16px;
}

.status-badge {
    display: inline-block;
    padding: 6px 12px;
    border-radius: 16px;
    font-size: 0.8rem;
    font-weight: 600;
}

.status-badge.in-progress {
    background: rgba(245, 158, 11, 0.1);
    color: var(--warning-color);
}

/* Streak Section */
.streak-section {
    padding: 40px 0;
    background: white;
}

.streak-card {
    background: linear-gradient(135deg, #ff6b6b, #ee5a24);
    border-radius: var(--border-radius-lg);
    padding: 32px;
    color: white;
    display: flex;
    justify-content: space-between;
    align-items: center;
    max-width: 600px;
    margin: 0 auto;
}

.streak-content {
    display: flex;
    align-items: center;
    gap: 20px;
}

.streak-icon {
    width: 60px;
    height: 60px;
    background: rgba(255, 255, 255, 0.2);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5rem;
}

.streak-info h3 {
    font-size: 1.5rem;
    font-weight: 700;
    margin-bottom: 4px;
}

.streak-info p {
    font-size: 0.9rem;
    opacity: 0.9;
}

.streak-calendar {
    display: flex;
    gap: 8px;
}

.day {
    width: 36px;
    height: 36px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.8rem;
    font-weight: 600;
    background: rgba(255, 255, 255, 0.2);
}

.day.completed {
    background: rgba(255, 255, 255, 0.3);
}

.day.today {
    background: white;
    color: #ff6b6b;
}

/* What's New Section */
.whats-new-section {
    padding: 80px 0;
    background: var(--light-gray);
}

.news-card {
    background: white;
    border-radius: var(--border-radius-lg);
    padding: 32px;
    height: 100%;
    position: relative;
    overflow: hidden;
    transition: all 0.3s ease;
    border: 1px solid var(--border-color);
}

.news-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
}

.gradient-1::before {
    background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
}

.gradient-2::before {
    background: linear-gradient(90deg, #ef4444, #dc2626);
}

.gradient-3::before {
    background: linear-gradient(90deg, var(--warning-color), #d97706);
}

.news-card:hover {
    transform: translateY(-6px);
    box-shadow: var(--shadow-xl);
    border-color: transparent;
}

.news-content {
    position: relative;
    z-index: 2;
}

.news-badge {
    display: inline-block;
    padding: 6px 12px;
    border-radius: 16px;
    font-size: 0.75rem;
    font-weight: 700;
    margin-bottom: 16px;
    background: rgba(99, 102, 241, 0.1);
    color: var(--primary-color);
}

.gradient-2 .news-badge {
    background: rgba(239, 68, 68, 0.1);
    color: #dc2626;
}

.gradient-3 .news-badge {
    background: rgba(245, 158, 11, 0.1);
    color: var(--warning-color);
}

.news-title {
    font-size: 1.3rem;
    font-weight: 700;
    color: var(--dark-color);
    margin-bottom: 12px;
    line-height: 1.3;
}

.news-description {
    color: var(--medium-gray);
    margin-bottom: 20px;
    line-height: 1.5;
}

.news-link {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    color: var(--primary-color);
    text-decoration: none;
    font-weight: 600;
    transition: all 0.3s ease;
}

.news-link:hover {
    gap: 12px;
}

.news-visual {
    position: absolute;
    top: 32px;
    right: 32px;
    width: 60px;
    height: 60px;
    background: rgba(99, 102, 241, 0.1);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5rem;
    color: var(--primary-color);
}

.gradient-2 .news-visual {
    background: rgba(239, 68, 68, 0.1);
    color: #dc2626;
}

.gradient-3 .news-visual {
    background: rgba(245, 158, 11, 0.1);
    color: var(--warning-color);
}

/* CTA Section */
.cta-section {
    padding: 100px 0;
    background: linear-gradient(135deg, var(--dark-color), #374151);
    color: white;
}

.cta-content {
    position: relative;
}

.cta-title {
    font-size: 2.5rem;
    font-weight: 800;
    margin-bottom: 1.5rem;
    line-height: 1.2;
}

.cta-subtitle {
    font-size: 1.1rem;
    opacity: 0.9;
    margin-bottom: 2rem;
    line-height: 1.6;
}

.cta-features {
    margin-bottom: 2.5rem;
}

.cta-feature {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 12px;
}

.cta-feature i {
    color: var(--success-color);
    font-size: 1.1rem;
}

.cta-buttons {
    display: flex;
    gap: 1rem;
    flex-wrap: wrap;
}

.cta-buttons .btn {
    padding: 16px 32px;
    border-radius: 50px;
    font-weight: 600;
    transition: all 0.3s ease;
}

.cta-buttons .btn:hover {
    transform: translateY(-2px);
}

.cta-visual {
    display: flex;
    justify-content: center;
    align-items: center;
}

.testimonial-card {
    background: rgba(255, 255, 255, 0.05);
    backdrop-filter: blur(20px);
    border-radius: var(--border-radius-lg);
    padding: 32px;
    border: 1px solid rgba(255, 255, 255, 0.1);
    max-width: 400px;
}

.testimonial-content {
    margin-bottom: 20px;
}

.testimonial-content p {
    font-style: italic;
    font-size: 1.1rem;
    line-height: 1.5;
}

.testimonial-author {
    display: flex;
    align-items: center;
    gap: 16px;
}

.author-avatar {
    width: 50px;
    height: 50px;
    background: var(--primary-color);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-weight: 700;
}

.author-info h6 {
    font-weight: 600;
    margin-bottom: 4px;
}

.author-info span {
    font-size: 0.9rem;
    opacity: 0.8;
}

/* Search Results */
.search-results {
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    background: white;
    border-radius: var(--border-radius);
    box-shadow: var(--shadow-xl);
    border: 1px solid var(--border-color);
    z-index: 1000;
    max-height: 400px;
    overflow-y: auto;
    margin-top: 8px;
}

.search-loading {
    padding: 24px;
    text-align: center;
    color: var(--medium-gray);
}

.search-section {
    border-bottom: 1px solid var(--border-color);
}

.search-section:last-child {
    border-bottom: none;
}

.search-section-title {
    padding: 16px 20px 8px;
    font-weight: 600;
    color: var(--dark-color);
    font-size: 0.9rem;
    display: flex;
    align-items: center;
}

.search-item {
    display: flex;
    align-items: center;
    padding: 12px 20px;
    text-decoration: none;
    color: inherit;
    transition: background 0.2s ease;
}

.search-item:hover {
    background: var(--light-gray);
    color: inherit;
    text-decoration: none;
}

.search-item-icon {
    width: 40px;
    height: 40px;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-right: 16px;
    font-size: 1rem;
    color: white;
}

.search-item-icon.course {
    background: var(--primary-color);
}

.search-item-icon.class {
    background: #ef4444;
}

.search-item-icon.product {
    background: var(--accent-color);
}

.search-item-content {
    flex: 1;
}

.search-item-title {
    font-weight: 600;
    color: var(--dark-color);
    margin-bottom: 4px;
}

.search-item-subtitle {
    font-size: 0.85rem;
    color: var(--medium-gray);
}

.search-item-price {
    font-weight: 700;
    color: var(--primary-color);
}

.no-results {
    padding: 40px 20px;
    text-align: center;
    color: var(--medium-gray);
}

.no-results i {
    font-size: 2rem;
    margin-bottom: 16px;
    opacity: 0.5;
}

.no-results p {
    font-weight: 600;
    margin-bottom: 8px;
}

.no-results small {
    font-size: 0.8rem;
}

/* Animations */
@keyframes heroFloat {
    0%, 100% { 
        transform: translateY(0px) rotate(0deg); 
    }
    33% { 
        transform: translateY(-10px) rotate(1deg); 
    }
    66% { 
        transform: translateY(5px) rotate(-1deg); 
    }
}

@keyframes cardFloat {
    0%, 100% { 
        transform: translateY(0px); 
    }
    50% { 
        transform: translateY(-10px); 
    }
}

@keyframes pulse {
    0%, 100% { 
        opacity: 1; 
    }
    50% { 
        opacity: 0.5; 
    }
}

/* Responsive Design */
@media (max-width: 1024px) {
    .hero-title {
        font-size: 2.5rem;
    }
    
    .section-title {
        font-size: 2rem;
    }
    
    .cta-title {
        font-size: 2rem;
    }
}

@media (max-width: 768px) {
    .hero-section {
        padding: 80px 0 40px;
    }
    
    .hero-title {
        font-size: 2rem;
    }
    
    .hero-actions {
        justify-content: center;
    }
    
    .hero-visual {
        height: 300px;
        margin-top: 40px;
    }
    
    .floating-card {
        padding: 12px 16px;
        font-size: 0.9rem;
    }
    
    .hero-device {
        width: 200px;
        height: 240px;
    }
    
    .progress-ring {
        width: 80px;
        height: 80px;
    }
    
    .progress-text {
        font-size: 1.2rem;
    }
    
    .section-title {
        font-size: 1.8rem;
    }
    
    .feature-card {
        padding: 24px;
    }
    
    .feature-stats {
        gap: 16px;
    }
    
    .streak-card {
        flex-direction: column;
        gap: 24px;
        text-align: center;
    }
    
    .streak-calendar {
        justify-content: center;
    }
    
    .cta-title {
        font-size: 1.8rem;
    }
    
    .cta-buttons {
        justify-content: center;
    }
}

@media (max-width: 576px) {
    .container {
        padding-left: 1rem;
        padding-right: 1rem;
    }
    
    .hero-title {
        font-size: 1.8rem;
    }
    
    .hero-subtitle {
        font-size: 1rem;
    }
    
    .search-box {
        margin: 0 -8px;
    }
    
    .btn-hero {
        width: 100%;
        margin-bottom: 12px;
    }
    
    .stats-section {
        padding: 24px 0;
    }
    
    .stat-number {
        font-size: 2rem;
    }
    
    .features-section,
    .activity-section,
    .whats-new-section {
        padding: 60px 0;
    }
    
    .section-title {
        font-size: 1.6rem;
    }
    
    .feature-card {
        padding: 20px;
        margin-bottom: 20px;
    }
    
    .feature-title {
        font-size: 1.3rem;
    }
    
    .news-visual {
        position: static;
        margin: 20px auto 0;
    }
    
    .cta-section {
        padding: 60px 0;
    }
    
    .cta-title {
        font-size: 1.6rem;
    }
    
    .testimonial-card {
        padding: 24px;
        margin-top: 40px;
    }
}

/* Touch optimizations */
@media (hover: none) {
    .feature-card:hover,
    .activity-card:hover,
    .news-card:hover {
        transform: none;
    }
    
    .btn:hover {
        transform: none;
    }
}

/* High contrast mode */
@media (prefers-contrast: high) {
    :root {
        --border-color: #000;
        --medium-gray: #000;
    }
    
    .feature-card,
    .activity-card,
    .news-card {
        border: 2px solid var(--border-color);
    }
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
    }
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Search functionality
    const searchInput = document.querySelector('.search-input');
    const searchBtn = document.querySelector('.search-btn');
    const searchResults = document.getElementById('searchResults');
    const searchLoading = document.getElementById('searchLoading');
    const searchContent = document.getElementById('searchContent');
    
    let searchTimeout;
    
    // Perform search function
    window.performSearch = function() {
        const query = searchInput.value.trim();
        if (query.length < 2) {
            hideSearchResults();
            return;
        }
        
        showSearchLoading();
        
        // Make AJAX request to search endpoint
        fetch('/api/search', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'X-Requested-With': 'XMLHttpRequest'
            },
            body: JSON.stringify({ query: query })
        })
        .then(response => response.json())
        .then(data => {
            hideSearchLoading();
            displaySearchResults(data);
        })
        .catch(error => {
            hideSearchLoading();
            console.error('Search error:', error);
            displayNoResults();
        });
    };
    
    // Real-time search as user types
    searchInput.addEventListener('input', function() {
        clearTimeout(searchTimeout);
        const query = this.value.trim();
        
        if (query.length === 0) {
            hideSearchResults();
            return;
        }
        
        if (query.length < 2) {
            return;
        }
        
        searchTimeout = setTimeout(() => {
            performSearch();
        }, 300); // Debounce search
    });
    
    // Handle search button click
    searchBtn.addEventListener('click', function(e) {
        e.preventDefault();
        performSearch();
    });
    
    // Handle Enter key
    searchInput.addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
            e.preventDefault();
            performSearch();
        }
    });
    
    // Hide results when clicking outside
    document.addEventListener('click', function(e) {
        if (!e.target.closest('.search-container')) {
            hideSearchResults();
        }
    });
    
    function showSearchLoading() {
        searchResults.style.display = 'block';
        searchLoading.style.display = 'block';
        searchContent.style.display = 'none';
    }
    
    function hideSearchLoading() {
        searchLoading.style.display = 'none';
        searchContent.style.display = 'block';
    }
    
    function hideSearchResults() {
        searchResults.style.display = 'none';
    }
    
    function displaySearchResults(data) {
        let html = '';
        
        // Display Live Classes
        if (data.classes && data.classes.length > 0) {
            html += `
                <div class="search-section">
                    <div class="search-section-title">
                        <i class="fas fa-video me-2"></i>Live Classes (${data.classes.length})
                    </div>
            `;
            
            data.classes.forEach(cls => {
                html += `
                    <a href="/class/${cls.type}/${cls.id}" class="search-item">
                        <div class="search-item-icon class">
                            <i class="fas fa-${cls.type === 'individual' ? 'user' : 'users'}"></i>
                        </div>
                        <div class="search-item-content">
                            <div class="search-item-title">${cls.name}</div>
                            <div class="search-item-subtitle">${cls.type === 'individual' ? 'Individual' : 'Group'} Class</div>
                        </div>
                        <div class="search-item-price">${cls.type === 'individual' ? '$100' : 'D1000'}</div>
                    </a>
                `;
            });
            html += '</div>';
        }
        
        // Display Products
        if (data.products && data.products.length > 0) {
            html += `
                <div class="search-section">
                    <div class="search-section-title">
                        <i class="fas fa-shopping-cart me-2"></i>Products (${data.products.length})
                    </div>
            `;
            
            data.products.forEach(product => {
                html += `
                    <a href="/product/${product.id}" class="search-item">
                        <div class="search-item-icon product">
                            <i class="fas fa-cube"></i>
                        </div>
                        <div class="search-item-content">
                            <div class="search-item-title">${product.name}</div>
                            <div class="search-item-subtitle">${product.short_description || product.category}</div>
                        </div>
                        <div class="search-item-price">${product.price}</div>
                    </a>
                `;
            });
            html += '</div>';
        }
        
        // Display Projects
        if (data.projects && data.projects.length > 0) {
            html += `
                <div class="search-section">
                    <div class="search-section-title">
                        <i class="fas fa-lightbulb me-2"></i>Projects (${data.projects.length})
                    </div>
            `;
            
            data.projects.forEach(project => {
                html += `
                    <a href="/project/${project.id}" class="search-item">
                        <div class="search-item-icon project">
                            <i class="fas fa-cog"></i>
                        </div>
                        <div class="search-item-content">
                            <div class="search-item-title">${project.name}</div>
                            <div class="search-item-subtitle">${project.category || 'Robotics Project'}</div>
                        </div>
                        <div class="search-item-price">Free</div>
                    </a>
                `;
            });
            html += '</div>';
        }
        
        if (html === '') {
            displayNoResults();
            return;
        }
        
        searchContent.innerHTML = html;
        searchResults.style.display = 'block';
    }
    
    function displayNoResults() {
        searchContent.innerHTML = `
            <div class="no-results">
                <i class="fas fa-search"></i>
                <p>No results found for "${searchInput.value}"</p>
                <small>Try searching for live classes, projects, or robotics kits</small>
            </div>
        `;
        searchResults.style.display = 'block';
    }
    
    // Smooth scrolling for anchor links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
                target.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            }
        });
    });
    
    // Activity card menu functionality
    const activityMenus = document.querySelectorAll('.activity-menu');
    activityMenus.forEach(menu => {
        menu.addEventListener('click', function(e) {
            e.stopPropagation();
            // Add dropdown menu logic here
            console.log('Activity menu clicked');
        });
    });
    
    // Intersection Observer for animations
    const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
    };
    
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.style.opacity = '1';
                entry.target.style.transform = 'translateY(0)';
            }
        });
    }, observerOptions);
    
    // Observe feature cards for animation
    document.querySelectorAll('.feature-card, .activity-card, .news-card').forEach(card => {
        card.style.opacity = '0';
        card.style.transform = 'translateY(20px)';
        card.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
        observer.observe(card);
    });
    
    // Add loading states to buttons
    document.querySelectorAll('.btn').forEach(btn => {
        btn.addEventListener('click', function() {
            if (this.href && !this.href.includes('#')) {
                this.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i>Loading...';
            }
        });
    });
    
    // Progress bar animations
    const progressBars = document.querySelectorAll('.progress-fill');
    const progressObserver = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                const progressBar = entry.target;
                const width = progressBar.style.width;
                progressBar.style.width = '0%';
                setTimeout(() => {
                    progressBar.style.width = width;
                }, 200);
            }
        });
    }, observerOptions);
    
    progressBars.forEach(bar => {
        progressObserver.observe(bar);
    });
    
    // Add ripple effect to cards
    function createRipple(event) {
        const card = event.currentTarget;
        const circle = document.createElement('span');
        const diameter = Math.max(card.clientWidth, card.clientHeight);
        const radius = diameter / 2;
        
        circle.style.width = circle.style.height = `${diameter}px`;
        circle.style.left = `${event.clientX - card.offsetLeft - radius}px`;
        circle.style.top = `${event.clientY - card.offsetTop - radius}px`;
        circle.classList.add('ripple');
        
        const ripple = card.querySelector('.ripple');
        if (ripple) {
            ripple.remove();
        }
        
        card.appendChild(circle);
    }
    
    document.querySelectorAll('.feature-card, .activity-card, .news-card').forEach(card => {
        card.addEventListener('click', createRipple);
    });
});

// Add ripple effect styles
const rippleStyles = `
.ripple {
    position: absolute;
    border-radius: 50%;
    background-color: rgba(255, 255, 255, 0.6);
    transform: scale(0);
    animation: ripple-animation 600ms linear;
    pointer-events: none;
}

@keyframes ripple-animation {
    to {
        transform: scale(4);
        opacity: 0;
    }
}
`;

const styleSheet = document.createElement('style');
styleSheet.textContent = rippleStyles;
document.head.appendChild(styleSheet);
</script>
{% endblock %}
