<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{% block title %}BuXin Future Academy - Learning Management System{% endblock %}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet" />
    <link href="{{ url_for('static', filename='css/styles.css') }}" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

    <style>

   /* =================================================================
   üé® CSS VARIABLES & DESIGN SYSTEM
   ================================================================= */

:root {
    /* üé® PRIMARY COLOR PALETTE */
    --primary-color: #667eea;
    --secondary-color: #764ba2;
    --accent-color: #f093fb;
    
    /* üö¶ STATUS COLORS */
    --success-color: #4ecdc4;
    --warning-color: #ffeaa7;
    --danger-color: #fd79a8;
    --dark-color: #2d3436;
    --light-color: #ddd6fe;
    
    /* ‚ú® GLASS MORPHISM EFFECTS */
    --glass-bg: rgba(255, 255, 255, 0.1);
    --glass-border: rgba(255, 255, 255, 0.2);
    
    /* üåä SHADOW EFFECTS */
    --shadow-light: 0 8px 32px rgba(0, 0, 0, 0.1);
    --shadow-medium: 0 16px 48px rgba(0, 0, 0, 0.15);
    
    /* üåà GRADIENT DEFINITIONS */
    --gradient-primary: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
    --gradient-accent: linear-gradient(135deg, var(--accent-color) 0%, var(--primary-color) 100%);
}

/* =================================================================
   üîß GLOBAL STYLES & RESET
   ================================================================= */

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Inter', sans-serif;
    background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
    min-height: 100vh;
    line-height: 1.6;
    padding-bottom: 80px; /* üëà Room for bottom nav */
}

/* =================================================================
   üß≠ TOP NAVIGATION BAR
   ================================================================= */

/* üì± Main Navbar Container */
.navbar {
    background: var(--glass-bg) !important;
    backdrop-filter: blur(20px);
    border-bottom: 1px solid var(--glass-border);
    padding: 0.0500rem 0;
    margin-bottom: -1rem;
    transition: all 0.3s ease;
    position: sticky;
    top: 0;
    z-index: 1030;
    box-shadow: var(--shadow-light);
}

/* üìú Navbar Scroll Effect */
.navbar.scrolled {
    background: rgba(102, 126, 234, 0.95) !important;
    backdrop-filter: blur(25px);
}

/* üè∑Ô∏è Brand/Logo Section */
.navbar-brand {
    font-weight: 800;
    font-size: 1.5rem;
    background: var(--gradient-primary);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    transition: all 0.3s ease;
}

.navbar-brand:hover {
    transform: scale(1.05);
    filter: brightness(1.2);
}

/* ü§ñ Brand Icon with Animation */
.navbar-brand i {
    background: var(--gradient-accent);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    animation: robotPulse 2s ease-in-out infinite;
}

@keyframes robotPulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.1); }
}

/* üìã Navigation Container */
.navbar-nav {
    align-items: center;
}

/* üîó Navigation Links */
.nav-link {
    font-weight: 500;
    color: var(--dark-color) !important;
    padding: 0.5rem 1rem !important;
    border-radius: 50px;
    transition: all 0.3s ease;
    position: relative;
    margin: 0 0.25rem;
    display: flex;
    align-items: center;
}

.nav-link:hover {
    background: var(--glass-bg);
    backdrop-filter: blur(10px);
    color: var(--primary-color) !important;
    transform: translateY(-2px);
    box-shadow: var(--shadow-light);
}

.nav-link i {
    margin-right: 0.5rem;
    font-size: 0.9rem;
}

/* üì± Mobile Toggle Button */
.navbar-toggler {
    border: none;
    padding: 0.5rem;
    border-radius: 10px;
    background: var(--glass-bg);
    backdrop-filter: blur(10px);
}

.navbar-toggler:focus {
    box-shadow: none;
}

.navbar-toggler-icon {
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='rgba%2833, 37, 41, 0.75%29' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='m4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e");
}

/* =================================================================
   üìÇ DROPDOWN MENU SYSTEM
   ================================================================= */

/* üîΩ Dropdown Toggle Arrow Animation */
.dropdown-toggle::after {
    margin-left: 0.5rem;
    transition: transform 0.3s ease;
}

.dropdown.show .dropdown-toggle::after {
    transform: rotate(180deg);
}

/* üìã Dropdown Menu Container */
.dropdown-menu {
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(20px);
    border: 1px solid var(--glass-border);
    border-radius: 15px;
    box-shadow: var(--shadow-medium);
    margin-top: 0.5rem;
    padding: 0.5rem;
    min-width: 200px;
    animation: dropdownSlideIn 0.3s ease-out;
}

@keyframes dropdownSlideIn {
    from {
        opacity: 0;
        transform: translateY(-10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* üìù Dropdown Items */
.dropdown-item {
    padding: 0.75rem 1rem;
    border-radius: 10px;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    font-weight: 500;
    color: var(--dark-color);
    text-decoration: none;
}

.dropdown-item i {
    margin-right: 0.75rem;
    width: 16px;
    text-align: center;
    color: var(--primary-color);
}

.dropdown-item:hover {
    background: var(--gradient-primary);
    color: white;
    transform: translateX(5px);
}

.dropdown-item:hover i {
    color: white;
}

/* ‚ûñ Dropdown Divider */
.dropdown-divider {
    margin: 0.5rem 0;
    border-color: var(--glass-border);
}

/* =================================================================
   üîî BADGES & NOTIFICATIONS
   ================================================================= */

/* üõí Cart Badge */
.cart-badge {
    background: var(--gradient-accent);
    color: white;
    border-radius: 50%;
    padding: 0.25rem 0.5rem;
    font-size: 0.75rem;
    font-weight: 600;
    position: absolute;
    top: -5px;
    right: 5px;
    min-width: 20px;
    text-align: center;
    animation: bounceIn 0.5s ease;
}

@keyframes bounceIn {
    0% { transform: scale(0); }
    50% { transform: scale(1.2); }
    100% { transform: scale(1); }
}

/* üëã Welcome Message */
.navbar-text {
    background: var(--gradient-primary);
    color: white !important;
    padding: 0.5rem 1rem;
    border-radius: 25px;
    font-weight: 600;
    margin: 0 0.5rem;
    box-shadow: var(--shadow-light);
}

/* =================================================================
   üí¨ FLASH MESSAGES & ALERTS SYSTEM
   ================================================================= */

/* üìç Flash Messages Container */
.flash-messages-container {
    position: fixed;
    top: 90px;
    right: 20px;
    left: 20px;
    z-index: 1050;
    pointer-events: none;
    max-width: 600px;
    margin: 0 auto;
}

.flash-messages {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

/* üö® Alert Base Styles */
.alert {
    border: none;
    border-radius: 15px;
    background: #ffffff;
    color: #333;
    box-shadow: var(--shadow-medium);
    border-left: 4px solid;
    margin: 0;
    pointer-events: auto;
    animation: slideInFromRight 1s ease-out;
    position: relative;
    overflow: hidden;
}

.alert > * {
    position: relative;
    z-index: 2;
}

@keyframes slideInFromRight {
    from {
        opacity: 0;
        transform: translateX(100%);
    }
    to {
        opacity: 1;
        transform: translateX(0);
    }
}

/* üé® Alert Type Variations */
.alert-success {
    background: rgba(78, 205, 196, 0.95);
    color: white;
    border-left-color: #00b894;
}

.alert-danger {
    background: rgba(253, 121, 168, 0.95);
    color: white;
    border-left-color: #e84393;
}

.alert-warning {
    background: rgba(255, 234, 167, 0.95);
    color: #8b4513;
    border-left-color: #fdcb6e;
}

.alert-info {
    background: rgba(102, 126, 234, 0.95);
    color: white;
    border-left-color: #0984e3;
}

/* ‚ùå Alert Close Button */
.alert .btn-close {
    background: rgba(255, 255, 255, 0.2);
    border-radius: 50%;
    opacity: 0.8;
    transition: all 0.3s ease;
}

.alert .btn-close:hover {
    background: rgba(255, 255, 255, 0.3);
    opacity: 1;
    transform: scale(1.1);
}

/* üåÄ Alert Fade Transitions */
.alert.fade.show {
    transition: opacity 0.3s ease, transform 0.3s ease;
}

.alert.fade:not(.show) {
    opacity: 0;
    transform: translateX(100%);
}

/* üìä Progress Bar for Auto-dismiss */
.alert-progress {
    position: absolute;
    bottom: 0;
    left: 0;
    height: 3px;
    background: rgba(255, 255, 255, 0.3);
    border-radius: 0 0 15px 15px;
    animation: progressBar 5s linear forwards;
}

@keyframes progressBar {
    from { width: 100%; }
    to { width: 0%; }
}

/* ============================================================
   üì± BOTTOM NAVIGATION (FIXED, RESPONSIVE, GLASSMORPHIC)
   ============================================================ */

.bottom-nav {
    position: fixed !important;
    bottom: 0 !important;
    left: 0;
    right: 0;
    z-index: 1050;
    background: var(--glass-bg) !important;
    backdrop-filter: blur(20px);
    border-top: 1px solid var(--glass-border);
    padding: 0.5rem 0;
    box-shadow: 0 -8px 32px rgba(0, 0, 0, 0.1);
}


/* Ensure nav items do not wrap and are scrollable if needed */
.bottom-nav .container-fluid {
    display: flex;
    justify-content: space-around;
    flex-wrap: nowrap;
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    gap: 0.5rem;
    padding: 0 0.5rem;
}

/* Nav link styles */
.bottom-nav .nav-link {
    flex: 0 0 auto;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    color: var(--dark-color) !important;
    padding: 0.5rem;
    border-radius: 15px;
    transition: all 0.3s ease;
    text-decoration: none;
    min-width: 60px;
    text-align: center;
}

/* Hover and active states */
.bottom-nav .nav-link:hover,
.bottom-nav .nav-link.active {
    background: var(--gradient-primary);
    color: white !important;
    transform: translateY(-3px);
    box-shadow: var(--shadow-light);
}

/* Icon styling */
.bottom-nav .nav-link i {
    font-size: 1.2rem;
    margin-bottom: 0.25rem;
}

/* Label styling */
.bottom-nav .nav-link div {
    font-size: 0.75rem;
    font-weight: 500;
}

/* Haptic-like tap feedback */
.bottom-nav .nav-link:active {
    transform: scale(0.95);
    transition: transform 0.1s ease;
}

/* Accessibility: Focus state */
.bottom-nav .nav-link:focus {
    outline: 2px dashed var(--primary-color);
    outline-offset: 4px;
}

/* Responsive tweaks for smaller screens */
@media (max-width: 400px) {
    .bottom-nav .nav-link div {
        font-size: 0.65rem;
    }

    .bottom-nav .nav-link {
        padding: 0.4rem;
        min-width: 50px;
    }
}


/* =================================================================
   üìÑ CONTENT LAYOUT & STRUCTURE
   ================================================================= */

/* üìã Main Content Container */
.main-content {
    padding-bottom: 1000px;
}

/* =================================================================
   üîò BUTTON COMPONENTS
   ================================================================= */

/* üéØ Base Button Styles */
.btn {
    border-radius: 50px;
    font-weight: 600;
    padding: 0.75rem 1.5rem;
    transition: all 0.3s ease;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    border: none;
    position: relative;
    overflow: hidden;
}

/* ‚ú® Button Shine Effect */
.btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
    transition: all 0.5s ease;
}

.btn:hover::before {
    left: 100%;
}

.btn:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-medium);
}

/* üé® Button Color Variations */
.btn-primary {
    background: var(--gradient-primary);
}

.btn-success {
    background: linear-gradient(135deg, var(--success-color) 0%, #00b894 100%);
}

.btn-warning {
    background: linear-gradient(135deg, var(--warning-color) 0%, #fdcb6e 100%);
}

.btn-danger {
    background: linear-gradient(135deg, var(--danger-color) 0%, #e84393 100%);
}

/* =================================================================
   üÉè CARD COMPONENTS
   ================================================================= */

.card {
    border: none;
    border-radius: 20px;
    box-shadow: var(--shadow-light);
    backdrop-filter: blur(10px);
    background: rgba(255, 255, 255, 0.9);
    transition: all 0.3s ease;
}

.card:hover {
    transform: translateY(-5px);
    box-shadow: var(--shadow-medium);
}

/* =================================================================
   üìú CUSTOM SCROLLBAR
   ================================================================= */

::-webkit-scrollbar {
    width: 8px;
}

::-webkit-scrollbar-track {
    background: #f1f1f1;
    border-radius: 10px;
}

::-webkit-scrollbar-thumb {
    background: var(--gradient-primary);
    border-radius: 10px;
}

::-webkit-scrollbar-thumb:hover {
    background: var(--gradient-accent);
}

/* =================================================================
   ‚è≥ LOADING & ANIMATION COMPONENTS
   ================================================================= */

/* üåÄ Loading Spinner */
.loading-spinner {
    display: inline-block;
    width: 20px;
    height: 20px;
    border: 3px solid rgba(255, 255, 255, 0.3);
    border-radius: 50%;
    border-top-color: white;
    animation: spin 1s ease-in-out infinite;
}

@keyframes spin {
    to { transform: rotate(360deg); }
}

/* üîî Notification Animation */
.notification-enter {
    animation: notificationSlide 0.3s ease-out;
}

@keyframes notificationSlide {
    from {
        opacity: 0;
        transform: translateX(100%);
    }
    to {
        opacity: 1;
        transform: translateX(0);
    }
}

/* üåÖ Fade In Animation */
.animate-fade-in {
    animation: fadeIn 0.6s ease-out;
}

@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* =================================================================
   üé≠ THEME & SPECIAL COMPONENTS
   ================================================================= */

/* üåô Theme Toggle Button */
.theme-toggle {
    background: var(--glass-bg);
    border: 1px solid var(--glass-border);
    border-radius: 50%;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--dark-color);
    transition: all 0.3s ease;
}

.theme-toggle:hover {
    background: var(--gradient-primary);
    color: white;
    transform: rotate(180deg);
}

/* =================================================================
   üõ†Ô∏è UTILITY CLASSES
   ================================================================= */

/* ü™ü Glass Morphism Card */
.glass-card {
    background: var(--glass-bg);
    backdrop-filter: blur(20px);
    border: 1px solid var(--glass-border);
    border-radius: 20px;
    box-shadow: var(--shadow-light);
}

/* üåà Gradient Text */
.gradient-text {
    background: var(--gradient-primary);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

/* =================================================================
   üì± RESPONSIVE DESIGN
   ================================================================= */

/* üì± Tablet & Mobile (‚â§768px) */
@media (max-width: 768px) {
    .navbar-brand {
        font-size: 1.25rem;
    }
    
    .nav-link {
        padding: 0.4rem 0.8rem !important;
        font-size: 0.9rem;
    }
    
    .navbar-text {
        padding: 0.4rem 0.8rem;
        font-size: 0.85rem;
    }

    .flash-messages-container {
        right: 10px;
        left: 10px;
        top: 80px;
    }

    .dropdown-menu {
        position: static !important;
        transform: none !important;
        box-shadow: none;
        border: none;
        background: transparent;
        backdrop-filter: none;
    }

    .dropdown-item {
        padding: 0.5rem 1rem;
    }
}

/* üíª Desktop (‚â•992px) */
@media (min-width: 992px) {
    .main-content {
        padding-bottom: 2rem;
    }
}
</style>
</head>
<body>
    <!-- Modern Top Navbar with Organized Dropdowns -->
    <nav class="navbar navbar-expand-lg" id="mainNavbar">
        <div class="container-fluid">
            <a class="navbar-brand d-flex align-items-center" href="{{ url_for('index') }}">
                <i class="fas fa-robot me-2"></i>
                <span>BuXin</span>
            </a>
            
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarContent" aria-controls="navbarContent" aria-expanded="false">
                <span class="navbar-toggler-icon"></span>
            </button>
            
            <div class="collapse navbar-collapse" id="navbarContent">
                <ul class="navbar-nav ms-auto align-items-center">
                    {% if current_user.is_authenticated %}
                        <!-- Learning & Courses Dropdown -->
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="learningDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                <i class="fas fa-graduation-cap"></i>
                                <span>Learning</span>
                            </a>
                            <ul class="dropdown-menu" aria-labelledby="learningDropdown">
                                <li><a class="dropdown-item" href="{{ url_for('store') }}">
                                    <i class="fas fa-store"></i>Course Store
                                </a></li>
                                {% if not current_user.is_admin %}
                                    <li><a class="dropdown-item" href="{{ url_for('my_courses') }}">
                                        <i class="fas fa-book-open"></i>My Courses
                                    </a></li>
                                    <li><a class="dropdown-item" href="{{ url_for('my_course_orders') }}">
                                        <i class="fas fa-receipt"></i>Course Orders
                                    </a></li>
                                {% endif %}
                            </ul>
                        </li>

                        <!-- Shopping Dropdown -->
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="shoppingDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                <i class="fas fa-shopping-cart"></i>
                                <span>Shopping</span>
                                {% if not current_user.is_admin %}
                                    {% set cart_count = current_user.cart_items|length if current_user.cart_items else 0 %}
                                    {% if cart_count > 0 %}
                                        <span class="cart-badge">{{ cart_count }}</span>
                                    {% endif %}
                                {% endif %}
                            </a>
                            <ul class="dropdown-menu" aria-labelledby="shoppingDropdown">
                                <li><a class="dropdown-item" href="{{ url_for('products') }}">
                                    <i class="fas fa-box"></i>Products
                                </a></li>
                                {% if not current_user.is_admin %}
                                    <li><hr class="dropdown-divider"></li>
                                    <li><a class="dropdown-item" href="{{ url_for('cart') }}">
                                        <i class="fas fa-shopping-cart"></i>Course Cart
                                        {% if cart_count > 0 %}
                                            <span class="badge bg-primary ms-2">{{ cart_count }}</span>
                                        {% endif %}
                                    </a></li>
                                    <li><a class="dropdown-item" href="{{ url_for('product_cart') }}">
                                        <i class="fas fa-shopping-bag"></i>Product Cart
                                    </a></li>
                                {% endif %}
                            </ul>
                        </li>

                        {% if not current_user.is_admin %}
                            <!-- Orders & Payments Dropdown -->
                            <li class="nav-item dropdown">
                                <a class="nav-link dropdown-toggle" href="#" id="ordersDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                    <i class="fas fa-truck"></i>
                                    <span>Orders</span>
                                </a>
                                <ul class="dropdown-menu" aria-labelledby="ordersDropdown">
                                    <li><a class="dropdown-item" href="{{ url_for('my_orders') }}">
                                        <i class="fas fa-truck"></i>My Orders
                                    </a></li>
                                    <li><a class="dropdown-item" href="{{ url_for('payments') }}">
                                        <i class="fas fa-credit-card"></i>Payments
                                    </a></li>
                                </ul>
                            </li>
                        {% else %}
                            <!-- Admin can see payments directly -->
                            <li class="nav-item">
                                <a class="nav-link" href="{{ url_for('payments') }}">
                                    <i class="fas fa-credit-card"></i>
                                    <span>Payments</span>
                                </a>
                            </li>
                        {% endif %}

                        <!-- Tools & Support Dropdown -->
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="toolsDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                <i class="fas fa-tools"></i>
                                <span>Tools</span>
                            </a>
                            <ul class="dropdown-menu" aria-labelledby="toolsDropdown">
                                <li><a class="dropdown-item" href="{{ url_for('ai_assistant') }}">
                                    <i class="fas fa-brain"></i>AI Assistant
                                </a></li>
                                <li><a class="dropdown-item" href="{{ url_for('about_us') }}">
                                    <i class="fas fa-info-circle"></i>About Us
                                </a></li>
                            </ul>
                        </li>

                        <!-- User Account Dropdown -->
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="userDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                <i class="fas fa-user-circle"></i>
                                <span>{{ current_user.first_name }}</span>
                            </a>
                            <ul class="dropdown-menu" aria-labelledby="userDropdown">
                                <li><a class="dropdown-item" href="#">
                                    <i class="fas fa-user"></i>Profile
                                </a></li>
                                <li><a class="dropdown-item" href="#">
                                    <i class="fas fa-cog"></i>Settings
                                </a></li>
                                <li><hr class="dropdown-divider"></li>
                                <li><a class="dropdown-item" href="{{ url_for('logout') }}">
                                    <i class="fas fa-sign-out-alt"></i>Logout
                                </a></li>
                            </ul>
                        </li>

                    {% else %}
                        <!-- Guest User Navigation -->
                        <li class="nav-item">
                            <a class="nav-link" href="{{ url_for('store') }}">
                                <i class="fas fa-store"></i>
                                <span>Courses</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="{{ url_for('products') }}">
                                <i class="fas fa-box"></i>
                                <span>Products</span>
                            </a>
                        </li>
                        
                        <!-- Auth Dropdown for Guests -->
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="authDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                <i class="fas fa-user"></i>
                                <span>Account</span>
                            </a>
                            <ul class="dropdown-menu" aria-labelledby="authDropdown">
                                <li><a class="dropdown-item" href="{{ url_for('login') }}">
                                    <i class="fas fa-sign-in-alt"></i>Login
                                </a></li>
                                <li><a class="dropdown-item" href="{{ url_for('register') }}">
                                    <i class="fas fa-user-plus"></i>Register
                                </a></li>
                            </ul>
                        </li>
                    {% endif %}
                </ul>
            </div>
        </div>
    </nav>

    <!-- Floating Flash Messages Container -->
    <div class="flash-messages-container">
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                <div class="flash-messages">
                    {% for category, message in messages %}
                        <div class="alert alert-{{ 'danger' if category == 'error' else category }} alert-dismissible fade show notification-enter" role="alert">
                            <i class="fas fa-{{ 'exclamation-triangle' if category == 'warning' else 'check-circle' if category == 'success' else 'info-circle' if category == 'info' else 'times-circle' }} me-2"></i>
                            {{ message }}
                            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                            <div class="alert-progress"></div>
                        </div>
                    {% endfor %}
                </div>
            {% endif %}
        {% endwith %}
    </div>

    <!-- Main Content Area -->
    <div class="main-content animate-fade-in">
        {% block content %}
        {% endblock %}
    </div>

    <!-- Modern Bottom Navigation for Mobile -->
    <nav class="navbar d-lg-none bottom-nav fixed-bottom">
       <div class="container-fluid d-flex justify-content-around flex-nowrap overflow-auto">
            <a class="nav-link {% if request.endpoint == 'index' %}active{% endif %}" href="{{ url_for('index') }}">
                <i class="fas fa-home"></i>
                <div>Home</div>
            </a>
            <a class="nav-link {% if request.endpoint == 'store' %}active{% endif %}" href="{{ url_for('store') }}">
                <i class="fas fa-store"></i>
                <div>Courses</div>
            </a>
            <a class="nav-link {% if request.endpoint == 'products' %}active{% endif %}" href="{{ url_for('products') }}">
                <i class="fas fa-box"></i>
                <div>Products</div>
            </a>
            {% if current_user.is_authenticated %}
                <a class="nav-link {% if request.endpoint == 'cart' %}active{% endif %}" href="{{ url_for('cart') }}">
                    <i class="fas fa-shopping-cart"></i>
                    <div>Cart</div>
                </a>
                <a class="nav-link {% if request.endpoint == 'ai_assistant' %}active{% endif %}" href="{{ url_for('ai_assistant') }}">
                    <i class="fas fa-brain"></i>
                    <div>AI</div>
                </a>
            {% else %}
                <a class="nav-link {% if request.endpoint == 'login' %}active{% endif %}" href="{{ url_for('login') }}">
                    <i class="fas fa-sign-in-alt"></i>
                    <div>Login</div>
                </a>
            {% endif %}
        </div>
    </nav>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Navbar scroll effect
            const navbar = document.getElementById('mainNavbar');
            
            window.addEventListener('scroll', function() {
                if (window.scrollY > 50) {
                    navbar.classList.add('scrolled');
