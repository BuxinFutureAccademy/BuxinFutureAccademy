{% extends 'base.html' %}

{% block title %}My Dashboard - BuXin Future Academy{% endblock %}

{% block content %}
<div class="container py-4">
    <h1 class="mb-4"><i class="fas fa-tachometer-alt me-2" style="color: #667eea;"></i>My Dashboard</h1>
    
    <div class="row mb-4">
        <div class="col-12">
            <div class="card border-0 shadow-sm" style="border-radius: 15px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                <div class="card-body text-white p-4">
                    <h4>Welcome back, {{ current_user.first_name }}!</h4>
                    <p class="mb-0">Here's an overview of your learning journey.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Stats -->
    <div class="row g-4 mb-5">
        <div class="col-md-4">
            <div class="card border-0 shadow-sm h-100" style="border-radius: 15px;">
                <div class="card-body text-center">
                    <i class="fas fa-book-open fa-2x mb-2" style="color: #667eea;"></i>
                    <h3 class="mb-0">{{ purchases|length }}</h3>
                    <small class="text-muted">Courses Purchased</small>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card border-0 shadow-sm h-100" style="border-radius: 15px;">
                <div class="card-body text-center">
                    <i class="fas fa-project-diagram fa-2x mb-2" style="color: #28a745;"></i>
                    <h3 class="mb-0">{{ projects|length }}</h3>
                    <small class="text-muted">Projects Created</small>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card border-0 shadow-sm h-100" style="border-radius: 15px;">
                <div class="card-body text-center">
                    <i class="fas fa-chalkboard-teacher fa-2x mb-2" style="color: #17a2b8;"></i>
                    <h3 class="mb-0">{{ enrollments|length }}</h3>
                    <small class="text-muted">Class Enrollments</small>
                </div>
            </div>
        </div>
    </div>

    <!-- Quick Links -->
    <h4 class="mb-3">Quick Links</h4>
    <div class="row g-3">
        <div class="col-md-4">
            <a href="{{ url_for('store.my_courses') }}" class="card border-0 shadow-sm text-decoration-none" style="border-radius: 15px;">
                <div class="card-body d-flex align-items-center">
                    <i class="fas fa-play-circle fa-2x me-3" style="color: #667eea;"></i>
                    <div>
                        <h5 class="mb-0 text-dark">My Courses</h5>
                        <small class="text-muted">Continue learning</small>
                    </div>
                </div>
            </a>
        </div>
        <div class="col-md-4">
            <a href="{{ url_for('student_projects.my_projects') }}" class="card border-0 shadow-sm text-decoration-none" style="border-radius: 15px;">
                <div class="card-body d-flex align-items-center">
                    <i class="fas fa-folder-open fa-2x me-3" style="color: #28a745;"></i>
                    <div>
                        <h5 class="mb-0 text-dark">My Projects</h5>
                        <small class="text-muted">View your work</small>
                    </div>
                </div>
            </a>
        </div>
        <div class="col-md-4">
            <a href="{{ url_for('store.store') }}" class="card border-0 shadow-sm text-decoration-none" style="border-radius: 15px;">
                <div class="card-body d-flex align-items-center">
                    <i class="fas fa-store fa-2x me-3" style="color: #17a2b8;"></i>
                    <div>
                        <h5 class="mb-0 text-dark">Browse Courses</h5>
                        <small class="text-muted">Find new courses</small>
                    </div>
                </div>
            </a>
        </div>
    </div>

    <!-- Recent Courses -->
    {% if purchases %}
    <h4 class="mt-5 mb-3">My Courses</h4>
    <div class="row g-3">
        {% for purchase in purchases[:6] %}
        <div class="col-md-4">
            <div class="card border-0 shadow-sm h-100" style="border-radius: 15px;">
                <div class="card-body">
                    <h5 class="card-title">{{ purchase.course.title if purchase.course else 'Course' }}</h5>
                    <p class="text-muted small">Purchased: {{ purchase.purchased_at.strftime('%Y-%m-%d') if purchase.purchased_at else 'N/A' }}</p>
                    <a href="{{ url_for('store.learn_course', course_id=purchase.course_id) }}" class="btn btn-primary btn-sm">
                        <i class="fas fa-play me-1"></i>Continue
                    </a>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
    {% endif %}
</div>
{% endblock %}
