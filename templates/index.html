{% extends "base.html" %}

{% block content %}
<!-- Modern Hero Section -->
<div class="modern-hero">
    <div class="hero-background"></div>
    <div class="container">
        <div class="hero-content text-center">
            <div class="hero-greeting mb-4">
                {% if current_user.is_authenticated %}
                    <h1 class="greeting-text">What will you learn today, {{ current_user.first_name }}?</h1>
                {% else %}
                    <h1 class="greeting-text">What will you design today?</h1>
                {% endif %}
            </div>
            
            <!-- Navigation Tabs -->
            <div class="nav-tabs-modern mb-5">
                <div class="tab-buttons">
                    <button class="tab-btn active" data-tab="main">Your Dashboard</button>
                    <button class="tab-btn" data-tab="templates">Templates</button>
                    <button class="tab-btn" data-tab="ai">AI</button>
                </div>
            </div>
            
            <!-- Search Bar -->
            <div class="search-container mb-5">
                <div class="search-box">
                    <i class="fas fa-search search-icon"></i>
                    <input type="text" placeholder="Search courses, classes, or AI tools..." class="search-input">
                    <button class="search-btn">
                        <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Main Features Grid -->
<div class="features-grid-section py-5">
    <div class="container">
        <div class="row g-4">
            <!-- Classes Card -->
            <div class="col-lg-3 col-md-6">
                <a href="{{ url_for('available_classes') }}" class="feature-card classes-card">
                    <div class="feature-icon">
                        <i class="fas fa-users"></i>
                    </div>
                    <h5 class="feature-title">Classes</h5>
                    <p class="feature-subtitle">Join live interactive sessions</p>
                </a>
            </div>
            
            <!-- Courses Card -->
            <div class="col-lg-3 col-md-6">
                <a href="{{ url_for('courses') }}" class="feature-card courses-card">
                    <div class="feature-icon">
                        <i class="fas fa-graduation-cap"></i>
                    </div>
                    <h5 class="feature-title">Courses</h5>
                    <p class="feature-subtitle">Self-paced learning paths</p>
                </a>
            </div>
            
            <!-- Shop Card -->
            <div class="col-lg-3 col-md-6">
                <a href="{{ url_for('products') }}" class="feature-card shop-card">
                    <div class="feature-icon">
                        <i class="fas fa-shopping-cart"></i>
                    </div>
                    <h5 class="feature-title">Shop</h5>
                    <p class="feature-subtitle">Robotics kits & components</p>
                </a>
            </div>
            
            <!-- AI Tools Card -->
            <div class="col-lg-3 col-md-6">
                <a href="{{ url_for('ai_tools') }}" class="feature-card ai-card">
                    <div class="feature-icon">
                        <i class="fas fa-robot"></i>
                    </div>
                    <h5 class="feature-title">AI Tools</h5>
                    <p class="feature-subtitle">Smart learning assistants</p>
                </a>
            </div>
            
            <!-- Projects Card -->
            <div class="col-lg-3 col-md-6">
                <a href="{{ url_for('robotics_projects') }}" class="feature-card projects-card">
                    <div class="feature-icon">
                        <i class="fas fa-lightbulb"></i>
                    </div>
                    <h5 class="feature-title">Projects</h5>
                    <p class="feature-subtitle">Submit your robotics ideas</p>
                </a>
            </div>
            
            <!-- Certificates Card -->
            <div class="col-lg-3 col-md-6">
                <a href="{{ url_for('certificates') }}" class="feature-card certificates-card">
                    <div class="feature-icon">
                        <i class="fas fa-certificate"></i>
                    </div>
                    <h5 class="feature-title">Certificates</h5>
                    <p class="feature-subtitle">Earn industry recognition</p>
                </a>
            </div>
            
            <!-- Community Card -->
            <div class="col-lg-3 col-md-6">
                <a href="{{ url_for('community') }}" class="feature-card community-card">
                    <div class="feature-icon">
                        <i class="fas fa-comments"></i>
                    </div>
                    <h5 class="feature-title">Community</h5>
                    <p class="feature-subtitle">Connect with makers</p>
                </a>
            </div>
            
            <!-- Support Card -->
            <div class="col-lg-3 col-md-6">
                <a href="{{ url_for('support') }}" class="feature-card support-card">
                    <div class="feature-icon">
                        <i class="fas fa-headset"></i>
                    </div>
                    <h5 class="feature-title">Support</h5>
                    <p class="feature-subtitle">Get help when you need it</p>
                </a>
            </div>
        </div>
    </div>
</div>

<!-- What's New Section -->
<div class="whats-new-section py-5">
    <div class="container">
        <div class="section-header mb-4">
            <h2 class="section-title">What's new</h2>
        </div>
        
        <div class="row g-4">
            <!-- New Course Highlight -->
            <div class="col-lg-4 col-md-6">
                <div class="news-card gradient-card-1">
                    <div class="news-content">
                        <h5 class="news-title">Advanced Robotics Course</h5>
                        <p class="news-subtitle">Master robot programming with AI integration</p>
                        <i class="fas fa-arrow-right news-arrow"></i>
                    </div>
                    <div class="news-visual">
                        <i class="fas fa-robot fa-3x"></i>
                    </div>
                </div>
            </div>
            
            <!-- New AI Tool -->
            <div class="col-lg-4 col-md-6">
                <div class="news-card gradient-card-2">
                    <div class="news-content">
                        <h5 class="news-title">AI Code Assistant</h5>
                        <p class="news-subtitle">Get instant help with your programming projects</p>
                        <i class="fas fa-arrow-right news-arrow"></i>
                    </div>
                    <div class="news-visual">
                        <i class="fas fa-brain fa-3x"></i>
                    </div>
                </div>
            </div>
            
            <!-- New Workshop -->
            <div class="col-lg-4 col-md-6">
                <div class="news-card gradient-card-3">
                    <div class="news-content">
                        <h5 class="news-title">EV Workshop Series</h5>
                        <p class="news-subtitle">Build your own electric vehicle from scratch</p>
                        <i class="fas fa-arrow-right news-arrow"></i>
                    </div>
                    <div class="news-visual">
                        <i class="fas fa-car-battery fa-3x"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Recent Activity Section -->
{% if current_user.is_authenticated %}
<div class="recent-activity-section py-5">
    <div class="container">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h2 class="section-title">Recent activity</h2>
            <a href="#" class="see-all-link">See all</a>
        </div>
        
        <div class="row g-4">
            <!-- Recent Course -->
            <div class="col-lg-4 col-md-6">
                <div class="activity-card">
                    <div class="activity-thumbnail">
                        <i class="fas fa-play-circle"></i>
                    </div>
                    <div class="activity-content">
                        <h6 class="activity-title">Arduino Basics</h6>
                        <p class="activity-subtitle">Continue where you left off</p>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 65%"></div>
                        </div>
                        <small class="progress-text">65% complete</small>
                    </div>
                    <button class="activity-menu">
                        <i class="fas fa-ellipsis-h"></i>
                    </button>
                </div>
            </div>
            
            <!-- Recent Project -->
            <div class="col-lg-4 col-md-6">
                <div class="activity-card">
                    <div class="activity-thumbnail">
                        <i class="fas fa-cog"></i>
                    </div>
                    <div class="activity-content">
                        <h6 class="activity-title">Smart Home Project</h6>
                        <p class="activity-subtitle">Draft saved 2 hours ago</p>
                        <div class="project-status">
                            <span class="status-badge in-progress">In Progress</span>
                        </div>
                    </div>
                    <button class="activity-menu">
                        <i class="fas fa-ellipsis-h"></i>
                    </button>
                </div>
            </div>
            
            <!-- Recent Purchase -->
            <div class="col-lg-4 col-md-6">
                <div class="activity-card">
                    <div class="activity-thumbnail">
                        <i class="fas fa-shopping-bag"></i>
                    </div>
                    <div class="activity-content">
                        <h6 class="activity-title">Arduino Starter Kit</h6>
                        <p class="activity-subtitle">Delivered yesterday</p>
                        <div class="delivery-status">
                            <span class="status-badge delivered">Delivered</span>
                        </div>
                    </div>
                    <button class="activity-menu">
                        <i class="fas fa-ellipsis-h"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
{% endif %}

<!-- CTA Section for Non-logged Users -->
{% if not current_user.is_authenticated %}
<div class="auth-cta-section py-5">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-8 text-center">
                <h2 class="cta-title mb-4">Ready to start your journey?</h2>
                <p class="cta-subtitle mb-5">Join thousands of students learning the future of technology</p>
                <div class="auth-buttons">
                    <a href="{{ url_for('register') }}" class="btn btn-primary btn-lg me-3">
                        <i class="fas fa-rocket me-2"></i>Get Started
                    </a>
                    <a href="{{ url_for('login') }}" class="btn btn-outline-primary btn-lg">
                        <i class="fas fa-sign-in-alt me-2"></i>Sign In
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>
{% endif %}

<style>
/* Modern Hero Section */
.modern-hero {
    position: relative;
    min-height: 60vh;
    display: flex;
    align-items: center;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    overflow: hidden;
}

.hero-background {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 600"><defs><linearGradient id="grad" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:rgba(255,255,255,0.1)"/><stop offset="100%" style="stop-color:rgba(255,255,255,0.05)"/></linearGradient></defs><circle cx="200" cy="100" r="50" fill="url(%23grad)"/><circle cx="800" cy="200" r="80" fill="url(%23grad)"/><circle cx="1000" cy="400" r="60" fill="url(%23grad)"/></svg>');
    animation: float 20s ease-in-out infinite;
}

.greeting-text {
    font-size: 2.5rem;
    font-weight: 700;
    margin-bottom: 0;
    animation: fadeInUp 1s ease;
}

/* Navigation Tabs */
.nav-tabs-modern {
    display: flex;
    justify-content: center;
}

.tab-buttons {
    display: flex;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 50px;
    padding: 8px;
    backdrop-filter: blur(10px);
}

.tab-btn {
    background: none;
    border: none;
    color: white;
    padding: 12px 24px;
    border-radius: 40px;
    font-weight: 500;
    transition: all 0.3s ease;
    cursor: pointer;
}

.tab-btn.active {
    background: rgba(255, 255, 255, 0.2);
    backdrop-filter: blur(20px);
}

.tab-btn:hover {
    background: rgba(255, 255, 255, 0.15);
}

/* Search Container */
.search-container {
    max-width: 600px;
    margin: 0 auto;
}

.search-box {
    position: relative;
    background: rgba(255, 255, 255, 0.95);
    border-radius: 50px;
    padding: 4px 4px 4px 20px;
    display: flex;
    align-items: center;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
    backdrop-filter: blur(20px);
}

.search-icon {
    color: #666;
    margin-right: 15px;
    font-size: 1.1rem;
}

.search-input {
    flex: 1;
    border: none;
    background: none;
    padding: 16px 0;
    font-size: 1rem;
    color: #333;
    outline: none;
}

.search-input::placeholder {
    color: #999;
}

.search-btn {
    background: #667eea;
    border: none;
    color: white;
    width: 50px;
    height: 50px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.3s ease;
}

.search-btn:hover {
    background: #5a6fd8;
    transform: scale(1.05);
}

/* Features Grid */
.features-grid-section {
    background: #f8f9fa;
}

.feature-card {
    display: block;
    background: white;
    border-radius: 20px;
    padding: 30px 20px;
    text-align: center;
    text-decoration: none;
    color: inherit;
    transition: all 0.3s ease;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
    height: 100%;
    position: relative;
    overflow: hidden;
}

.feature-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: linear-gradient(90deg, #667eea, #764ba2);
    transform: scaleX(0);
    transition: transform 0.3s ease;
}

.feature-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
    text-decoration: none;
    color: inherit;
}

.feature-card:hover::before {
    transform: scaleX(1);
}

.feature-icon {
    width: 70px;
    height: 70px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 20px;
    font-size: 1.8rem;
    color: white;
}

.classes-card .feature-icon { background: linear-gradient(135deg, #667eea, #764ba2); }
.courses-card .feature-icon { background: linear-gradient(135deg, #f093fb, #f5576c); }
.shop-card .feature-icon { background: linear-gradient(135deg, #4facfe, #00f2fe); }
.ai-card .feature-icon { background: linear-gradient(135deg, #43e97b, #38f9d7); }
.projects-card .feature-icon { background: linear-gradient(135deg, #fa709a, #fee140); }
.certificates-card .feature-icon { background: linear-gradient(135deg, #a8edea, #fed6e3); }
.community-card .feature-icon { background: linear-gradient(135deg, #ff9a9e, #fecfef); }
.support-card .feature-icon { background: linear-gradient(135deg, #ffecd2, #fcb69f); }

.feature-title {
    font-size: 1.2rem;
    font-weight: 600;
    margin-bottom: 8px;
    color: #333;
}

.feature-subtitle {
    font-size: 0.9rem;
    color: #666;
    margin: 0;
}

/* What's New Section */
.whats-new-section {
    background: white;
}

.section-title {
    font-size: 1.8rem;
    font-weight: 700;
    color: #333;
    margin: 0;
}

.news-card {
    background: white;
    border-radius: 20px;
    padding: 30px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    text-decoration: none;
    color: white;
    transition: all 0.3s ease;
    min-height: 150px;
    position: relative;
    overflow: hidden;
}

.gradient-card-1 { background: linear-gradient(135deg, #667eea, #764ba2); }
.gradient-card-2 { background: linear-gradient(135deg, #f093fb, #f5576c); }
.gradient-card-3 { background: linear-gradient(135deg, #4facfe, #00f2fe); }

.news-card:hover {
    transform: translateY(-3px);
    color: white;
    text-decoration: none;
}

.news-content {
    flex: 1;
}

.news-title {
    font-size: 1.3rem;
    font-weight: 600;
    margin-bottom: 8px;
}

.news-subtitle {
    font-size: 0.95rem;
    opacity: 0.9;
    margin: 0;
}

.news-visual {
    opacity: 0.3;
    margin-left: 20px;
}

.news-arrow {
    position: absolute;
    top: 20px;
    right: 20px;
    font-size: 1.2rem;
}

/* Recent Activity Section */
.recent-activity-section {
    background: #f8f9fa;
}

.see-all-link {
    color: #667eea;
    text-decoration: none;
    font-weight: 500;
}

.see-all-link:hover {
    color: #5a6fd8;
    text-decoration: underline;
}

.activity-card {
    background: white;
    border-radius: 15px;
    padding: 20px;
    display: flex;
    align-items: center;
    gap: 16px;
    transition: all 0.3s ease;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
}

.activity-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
}

.activity-thumbnail {
    width: 50px;
    height: 50px;
    background: linear-gradient(135deg, #667eea, #764ba2);
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 1.3rem;
}

.activity-content {
    flex: 1;
}

.activity-title {
    font-size: 1rem;
    font-weight: 600;
    margin-bottom: 4px;
    color: #333;
}

.activity-subtitle {
    font-size: 0.85rem;
    color: #666;
    margin-bottom: 8px;
}

.progress-bar {
    width: 100%;
    height: 4px;
    background: #e9ecef;
    border-radius: 2px;
    overflow: hidden;
    margin-bottom: 4px;
}

.progress-fill {
    height: 100%;
    background: linear-gradient(90deg, #667eea, #764ba2);
    border-radius: 2px;
    transition: width 0.3s ease;
}

.progress-text {
    font-size: 0.75rem;
    color: #999;
}

.status-badge {
    padding: 4px 8px;
    border-radius: 12px;
    font-size: 0.75rem;
    font-weight: 500;
}

.status-badge.in-progress {
    background: #fff3cd;
    color: #856404;
}

.status-badge.delivered {
    background: #d4edda;
    color: #155724;
}

.activity-menu {
    background: none;
    border: none;
    color: #ccc;
    font-size: 1rem;
    cursor: pointer;
    padding: 8px;
}

/* Auth CTA Section */
.auth-cta-section {
    background: linear-gradient(135deg, #2c3e50, #34495e);
    color: white;
}

.cta-title {
    font-size: 2rem;
    font-weight: 700;
}

.cta-subtitle {
    font-size: 1.1rem;
    opacity: 0.9;
}

.auth-buttons .btn {
    border-radius: 50px;
    padding: 12px 30px;
    font-weight: 600;
}

/* Responsive Design */
@media (max-width: 768px) {
    .greeting-text {
        font-size: 1.8rem;
    }
    
    .tab-buttons {
        flex-direction: column;
        width: 100%;
    }
    
    .tab-btn {
        margin-bottom: 8px;
        width: 100%;
    }
    
    .search-box {
        margin: 0 20px;
    }
    
    .feature-card {
        margin-bottom: 20px;
    }
    
    .news-card {
        flex-direction: column;
        text-align: center;
        gap: 20px;
    }
    
    .news-visual {
        margin-left: 0;
    }
    
    .activity-card {
        flex-direction: column;
        text-align: center;
    }
}

/* Animations */
@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(30px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes float {
    0%, 100% { 
        transform: translateY(0px) rotate(0deg); 
    }
    33% { 
        transform: translateY(-10px) rotate(1deg); 
    }
    66% { 
        transform: translateY(5px) rotate(-1deg); 
    }
}

/* Loading animations */
.feature-card {
    animation: fadeInUp 0.6s ease forwards;
    animation-delay: calc(var(--delay, 0) * 0.1s);
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Tab switching functionality
    const tabButtons = document.querySelectorAll('.tab-btn');
    
    tabButtons.forEach(button => {
        button.addEventListener('click', function() {
            // Remove active class from all buttons
            tabButtons.forEach(btn => btn.classList.remove('active'));
            // Add active class to clicked button
            this.classList.add('active');
            
            // Here you can add logic to show/hide different content based on tab
            const tabType = this.getAttribute('data-tab');
            console.log('Switched to tab:', tabType);
        });
    });
    
    // Search functionality
    const searchInput = document.querySelector('.search-input');
    const searchBtn = document.querySelector('.search-btn');
    
    searchBtn.addEventListener('click', function() {
        const query = searchInput.value.trim();
        if (query) {
            // Redirect to search results or handle search
            window.location.href = `/search?q=${encodeURIComponent(query)}`;
        }
    });
    
    searchInput.addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
            searchBtn.click();
        }
    });
    
    // Add staggered animation delays to feature cards
    const featureCards = document.querySelectorAll('.feature-card');
    featureCards.forEach((card, index) => {
        card.style.setProperty('--delay', index);
    });
    
    // Activity card menu functionality
    const activityMenus = document.querySelectorAll('.activity-menu');
    activityMenus.forEach(menu => {
        menu.addEventListener('click', function(e) {
            e.stopPropagation();
            // Add dropdown menu logic here
            console.log('Activity menu clicked');
        });
    });
});
</script>
{% endblock %}
